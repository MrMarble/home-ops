apiVersion: v1
kind: ConfigMap
metadata:
  name: nextcloud-config
data:
  redis-cluster.config.php: |-
    <?php
    $CONFIG = [
      'memcache.distributed' => '\\OC\\Memcache\\Redis',
      'memcache.locking' => '\\OC\\Memcache\\Redis',
      'redis.cluster' => [
        'seeds' => [
          'redis-node-0.redis-headless.database.svc.cluster.local',
          'redis-node-1.redis-headless.database.svc.cluster.local',
          'redis-node-2.redis-headless.database.svc.cluster.local',
        ],
        'timeout' => 0.0,
        'read_timeout' => 0.0,
        'failover_mode' => \RedisCluster::FAILOVER_ERROR,
        'user' => '',
        'password' => ''
      ],
    ];
